<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>BeAPI-API-Framework</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <img src="beapi_logo2.png" style="width:auto;height:auto;padding:0px;">
        <p></p>

        <ul>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/index.html"><strong>Installation</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/confserv.html"><strong>Configure Server</strong></a>
              <ul>
                <li><a href="confserv.html#chg">Things You Have To Change</a></li>
                <li><a href="confserv.html#fqdn">Creating A Fake FQDN</a></li>
              </ul>
            </li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/confdb.html"><strong>Configure Database</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/confapi.html"><strong>Configure API Application</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/model.html"><strong>Model/Domain Object</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/controller.html"><strong>Controller</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/iostate.html"><strong>IO State</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/version.html"><strong>Versioning</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/usage.html"><strong>API Usage</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/batch.html"><strong>Batch Processing</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/chain.html"><strong>Api Chaining</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/hook.html"><strong>Web Hooks</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/troubleshooting.html"><strong>Troubleshooting</strong></a></li>
          <li>&nbsp</li>

        </ul>
      </header>
      <section>

<h1><a id="samp" class="anchor" href="#samp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuring The Server</h1>
<p>The project has an embedded and configured Tomcat server available so all you have to do is change the settings to fit what you need. This config can be found in &lt;your_directory&gt;/.beapi/beapi_server.yml and looks like the following:</p>
<pre><code>grails:
    tomcat:
        jvmArgs:
            -'-Xms2048m'
            -'-Xmx4096m'
            -'-XX:PermSize=256m'
            -'-XX:MaxPermSize=512m'
            -'-XX:+CMSClassUnloadingEnabled'
            -'-XX:+UseConcMarkSweepGC'
            -'-XX:+CMSIncrementalMode'
            -'-XX:+CMSIncrementalPacing'
            -'-XX:CMSIncrementalDutyCycle=10'
            -'-XX:+UseParNewGC'
            -'-XX:MaxGCPauseMillis=200'
            -'-XX:MaxGCMinorPauseMillis=10'
            -'-server'
            -'-noverify'
            -'-Xshare:off'
            -'-Djava.net.preferIPv4Stack=true'
            -'-XX:+EliminateLocks'
            -'-XX:+UseBiasedLocking'


---
environments:
    test:
        webhookActive: false
        apiThrottle: false
        iostate:
            preloadDir: '.beapi/.iostate'
            archInstanceUrls:
                proxy: "127.0.0.1"
                mq: "127.0.0.1"
        server:
            context-path: ''
            port: 8080
        grails:
            serverURL: "http://test.yourdomain.net:8080" #changeit
        quartz:
            pluginEnabled: false
    development:
        webhookActive: false
        apiThrottle: false
        iostate:
            preloadDir: '.beapi/.iostate'
            archInstanceUrls:
                proxy: "127.0.0.1"
                mq: "127.0.0.1"
        server:
            context-path: ''
            port: 8080
        grails:
            serverURL: "http://test.yourdomain.net:8080" #changeit
    production:
        webhookActive: false
        apiThrottle: false
        iostate:
            preloadDir: '.beapi/.iostate'
            archInstanceUrls:
                proxy: "127.0.0.1"
                mq: "127.0.0.1"
        server:
            context-path: ''
            port: 8080
        grails:
            serverURL: "http://test.yourdomain.net:8080" #changeit

---
server:
    tomcat:
        backgroundProcessorDelay: 5
        maxThreads: 400
        minSpareThreads: 100
        maxConnections: 100000
        uriEncoding: UTF-8
        compression: off
        compressableMimeTypes: application/json,text/json,application/xml,text/xml,text/plain
    use-forward-headers: true
    port: 8443                                  # The port to listen on
    ssl:
        enabled: true                           # Activate HTTPS mode on the server port
        keyStore: /home/your_home_directory/.ssh/keystore.jks         # e.g. /etc/tomcat7/keystore/tomcat.keystore
        keyStorePassword: yabbadabbadoo      # e.g. changeit
        keyAlias: selfsigned                   # e.g. tomcat</code></pre>


</br>
<h3><a id="chg" class="anchor" href="#conf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Only Things You Have To Change...</h3>

<p>Don't be intimidated! There are only a couple of things that have to be changed and configured here:
<ul>
<li><strong>serverURL</strong>: There will be three instances of this variable (marked with #changeit): one for your test, development and production environments. You will need to enter a url for each.  If you do not have a URL for your test/development, you can fake it by adding a fake FQDN in your /etc/hosts file (see below)</li>
<li><strong>SSL</strong>: For test and development, you will need a self-signed keystore (for production you need a real SSL cert). To generate a self-signed keystore, use the following:
  <pre><code>tool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass yabbadabbadoo -validity 360 -keysize 2048</code></pre>
  This will create a 'keystore.jks' which you can store in 'yourhomedirectory/.ssh' to use with 'ssl/keyStore' in the config. If you have additional questions on created a keystore, they can be <a href="https://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-using-java-keytool.html">answered here</a>.
</li>
</ul>
</p>



</br>
<h3><a id="fqdn" class="anchor" href="#conf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fake FQDN for Test/Development</h3>
        <p>If you are on a local test/development machine and need a FQDN (fully qualified domain name), they are very easy to fake. Just go into your <b>'/etc/hosts'</b> file on your local machine and add an entry like the following:</p>
<pre><code>127.0.0.1       test.domainyouown.com</code></pre>


</section>
      <footer>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
