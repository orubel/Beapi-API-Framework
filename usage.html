<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>BeAPI-API-Framework</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <img src="beapi_logo2.png" style="width:auto;height:auto;">
        <p></p>

        <ul>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/index.html"><strong>Installation</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/confserv.html"><strong>Configure Server</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/confdb.html"><strong>Configure Database</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/confapi.html"><strong>Configure API Application</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/model.html"><strong>The Model</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/iostate.html"><strong>IO State</strong></a></li>
            <li><a href="http://orubel.github.io/Beapi-API-Framework/version.html"><strong>Versioning</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/usage.html"><strong>API Usage</strong></a>
            <ul>
              <li><a href="usage.html#controller">Controller Implementation</a></li>
              <li><a href="usage.html#role_auth">Role Authorizing</a></li>
              <li><a href="usage.html#data_shell">Sending Data to API via Shell</a></li>
              <li><a href="usage.html#data_js">Sending Data to API via Javascript</a></li>
            </ul>
          </li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/batch.html"><strong>Batch Processing</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/chain.html"><strong>Api Chaining</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/troubleshooting.html"><strong>Troubleshooting</strong></a></li>
          <li>&nbsp</li>

        </ul>
      </header>
      <section>
        <h3><a id="controller" class="anchor" href="#controller" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Controller Implementation</h3>
        <p>Without <b>BeAPI&#8482;</b>, you may find yourself having to update your controllers, domains, security, urlmappings, etc just to install API's. <b>This is NOT THE CASE with BeAPI&#8482;</b>. BeAPI&#8482; makes API development simple, easy, fast and scalable. All you have to do is plug and play and BeAPI&#8482; takes care of the 'REST'.</p>

        <p>The only requirement is that in  your controller when returning a 'resource', you <b>have to</b> return your data under the name of controller. So if your Controller is named 'FredController' and you are returning data from a 'show' method, you would return it like so:</p>
<pre><code>return ['fred':data]
</code></pre>

        <h3><a id="role_auth" class="anchor" href="#role_auth" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Role Authorizing</h3>
        <p>Since we don't use URLMapping to secure our endpoints, we store all that data in the IO State and then load and cache at runtime so we can share that data with other services. As a result, this makes it easier for us to automate alot of the security so you no longer have to:</p>

<p>All automation and checks are automated based on your IO state files and you no longer have to do this in your controllers or services. Please read about <a href="iostate.html#rules>">'Defining URI Rule'</a> under <b><a href="iostate.html">IO State</a></b></p>

        
        <h3><a id="versioning" class="anchor" href="#versioning" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Versioning Explained</h3>
        <p>Primarily, versioning is for the 'application' more so than the IO State(request/response data) but since <b>BeAPI&#8482;</b> can handle and serve multiple versions of the IO State, we havce to know what version of the IO State we are serving. Thus versioning is broken into TWO pieces: the version of application concatenated with version of IO State.</p>

        <pre><code>v0.1-1</code></pre>
        
        <p> The above version tells us:
        <ul>
          <li><b>v</b>: That this is a regular api call (vs a batch or chain call)</li>
              <li><b>0.1</b>: The version of the application to use; this helps us with routing at the load balancer if you are handling multiple versions of the production software.</li>
              <li><b>1</b>: THIS is the version of the IO State to use. If left blank (v0.1 for example), it defaults to 'currentStable' in the IO State file.</li>
              <li><a href="usage.html#data_js">Sending Data to API via Javascript</a></li>
        </ul>        
        </p>
        
        <h3><a id="data_shell" class="anchor" href="#data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sending Data to API via Shell</h3>

        <h2>Authorizing from Shell</h2>
        <p>Simply replace <b><your_username</b> and <b>your_password</b> in the following curl command to login to your API from the shell:</p>
        <pre><code>curl -v -H "Content-Type: application/json" -X POST -d '{"username":"your_username","password":"yourpassword"}' http://localhost:8080/api/login</code></pre>
      <p>This will return an 'access token' which you then use in your calls below.</p>
        </br>
        <h2>Calling API from Shell</h2>
        <p>Once you have authorized, you can now call the API endpoints using the token that was returned:</p>

        <p><b>GET Example</b></p>
        <pre><code>curl -v -H "Content-Type: application/json" -H "Authorization: Bearer [access token]" --request GET "http://localhost:8080/v0.1/post/show/1"</code></pre>

        <p><b>POST Example</b></p>
        <pre><code>curl -v -H "Content-Type: application/json" -H "Authorization: Bearer [access token]" --request POST -d "{'title': 'test post','teaser': 'This is just a test post to see if this works. Testing the api post system.','content':'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel consequat nisl, quis commodo neque. Integer ultrices vitae nulla lacinia rutrum. Duis ut porta arcu, sed gravida tortor. Donec pulvinar elit turpis, ultricies tristique mi auctor ac. Ut elementum ullamcorper risus ac sollicitudin. Morbi semper ultrices enim vel euismod. Proin eleifend orci ac elit mollis tempor. Nulla egestas odio eu volutpat eleifend. Nunc nec massa eget nisl sodales posuere. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nunc accumsan pretium sapien a tincidunt. Sed at fringilla mi.','sectionId':2}" http://localhost:8080/v0.1/post/create</code></pre>

        <p><b>PUT Example</b></p>
        <pre><code>curl -v -H "Content-Type: application/json" -H "Authorization: Bearer [access token]" --request PUT -d "{'title':'testamundo'}" "http://localhost:8080/v0.1/post/update/1"</code></pre>

      </section>
      <footer>
        <p class="view"><a href="https://github.com/orubel/Beapi-API-Framework">View the Project on GitHub <small>orubel/Beapi-API-Framework</small></a></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
